function cov_1oswnuiqra(){var path="/home/manuel/Desktop/ProyIntegral/app/controllers/foods.controller.js";var hash="6ef2cdc774bf8f71734f6ca5a32b77e68f31d6a6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/manuel/Desktop/ProyIntegral/app/controllers/foods.controller.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:2,column:13},end:{line:2,column:21}},"2":{start:{line:3,column:11},end:{line:3,column:26}},"3":{start:{line:6,column:0},end:{line:31,column:2}},"4":{start:{line:8,column:3},end:{line:13,column:3}},"5":{start:{line:9,column:4},end:{line:11,column:7}},"6":{start:{line:12,column:4},end:{line:12,column:11}},"7":{start:{line:16,column:15},end:{line:18,column:3}},"8":{start:{line:21,column:2},end:{line:30,column:7}},"9":{start:{line:23,column:6},end:{line:23,column:21}},"10":{start:{line:26,column:6},end:{line:29,column:9}},"11":{start:{line:34,column:0},end:{line:48,column:2}},"12":{start:{line:35,column:17},end:{line:35,column:31}},"13":{start:{line:36,column:20},end:{line:36,column:71}},"14":{start:{line:38,column:4},end:{line:47,column:9}},"15":{start:{line:40,column:8},end:{line:40,column:23}},"16":{start:{line:43,column:8},end:{line:46,column:11}},"17":{start:{line:51,column:0},end:{line:63,column:2}},"18":{start:{line:52,column:15},end:{line:52,column:26}},"19":{start:{line:54,column:4},end:{line:62,column:9}},"20":{start:{line:56,column:8},end:{line:56,column:23}},"21":{start:{line:59,column:8},end:{line:61,column:11}},"22":{start:{line:66,column:0},end:{line:88,column:2}},"23":{start:{line:67,column:15},end:{line:67,column:26}},"24":{start:{line:69,column:4},end:{line:87,column:9}},"25":{start:{line:73,column:8},end:{line:81,column:9}},"26":{start:{line:74,column:10},end:{line:76,column:13}},"27":{start:{line:78,column:10},end:{line:80,column:13}},"28":{start:{line:84,column:8},end:{line:86,column:11}},"29":{start:{line:91,column:0},end:{line:113,column:2}},"30":{start:{line:92,column:15},end:{line:92,column:26}},"31":{start:{line:94,column:4},end:{line:112,column:9}},"32":{start:{line:98,column:8},end:{line:106,column:9}},"33":{start:{line:99,column:10},end:{line:101,column:13}},"34":{start:{line:103,column:10},end:{line:105,column:13}},"35":{start:{line:109,column:8},end:{line:111,column:11}},"36":{start:{line:116,column:0},end:{line:130,column:2}},"37":{start:{line:117,column:4},end:{line:129,column:11}},"38":{start:{line:122,column:10},end:{line:122,column:76}},"39":{start:{line:125,column:10},end:{line:128,column:13}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:31},end:{line:31,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:10},end:{line:22,column:11}},loc:{start:{line:22,column:18},end:{line:24,column:5}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:25,column:11},end:{line:25,column:12}},loc:{start:{line:25,column:18},end:{line:30,column:5}},line:25},"3":{name:"(anonymous_3)",decl:{start:{line:34,column:18},end:{line:34,column:19}},loc:{start:{line:34,column:32},end:{line:48,column:1}},line:34},"4":{name:"(anonymous_4)",decl:{start:{line:39,column:12},end:{line:39,column:13}},loc:{start:{line:39,column:20},end:{line:41,column:7}},line:39},"5":{name:"(anonymous_5)",decl:{start:{line:42,column:13},end:{line:42,column:14}},loc:{start:{line:42,column:20},end:{line:47,column:7}},line:42},"6":{name:"(anonymous_6)",decl:{start:{line:51,column:18},end:{line:51,column:19}},loc:{start:{line:51,column:32},end:{line:63,column:1}},line:51},"7":{name:"(anonymous_7)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:20},end:{line:57,column:7}},line:55},"8":{name:"(anonymous_8)",decl:{start:{line:58,column:13},end:{line:58,column:14}},loc:{start:{line:58,column:20},end:{line:62,column:7}},line:58},"9":{name:"(anonymous_9)",decl:{start:{line:66,column:17},end:{line:66,column:18}},loc:{start:{line:66,column:31},end:{line:88,column:1}},line:66},"10":{name:"(anonymous_10)",decl:{start:{line:72,column:12},end:{line:72,column:13}},loc:{start:{line:72,column:19},end:{line:82,column:7}},line:72},"11":{name:"(anonymous_11)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:20},end:{line:87,column:7}},line:83},"12":{name:"(anonymous_12)",decl:{start:{line:91,column:17},end:{line:91,column:18}},loc:{start:{line:91,column:31},end:{line:113,column:1}},line:91},"13":{name:"(anonymous_13)",decl:{start:{line:97,column:12},end:{line:97,column:13}},loc:{start:{line:97,column:19},end:{line:107,column:7}},line:97},"14":{name:"(anonymous_14)",decl:{start:{line:108,column:13},end:{line:108,column:14}},loc:{start:{line:108,column:20},end:{line:112,column:7}},line:108},"15":{name:"(anonymous_15)",decl:{start:{line:116,column:20},end:{line:116,column:21}},loc:{start:{line:116,column:34},end:{line:130,column:1}},line:116},"16":{name:"(anonymous_16)",decl:{start:{line:121,column:14},end:{line:121,column:15}},loc:{start:{line:121,column:22},end:{line:123,column:9}},line:121},"17":{name:"(anonymous_17)",decl:{start:{line:124,column:15},end:{line:124,column:16}},loc:{start:{line:124,column:22},end:{line:129,column:9}},line:124}},branchMap:{"0":{loc:{start:{line:8,column:3},end:{line:13,column:3}},type:"if",locations:[{start:{line:8,column:3},end:{line:13,column:3}},{start:{line:8,column:3},end:{line:13,column:3}}],line:8},"1":{loc:{start:{line:28,column:10},end:{line:28,column:57}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:21}},{start:{line:28,column:25},end:{line:28,column:57}}],line:28},"2":{loc:{start:{line:36,column:20},end:{line:36,column:71}},type:"cond-expr",locations:[{start:{line:36,column:27},end:{line:36,column:64}},{start:{line:36,column:67},end:{line:36,column:71}}],line:36},"3":{loc:{start:{line:45,column:12},end:{line:45,column:58}},type:"binary-expr",locations:[{start:{line:45,column:12},end:{line:45,column:23}},{start:{line:45,column:27},end:{line:45,column:58}}],line:45},"4":{loc:{start:{line:73,column:8},end:{line:81,column:9}},type:"if",locations:[{start:{line:73,column:8},end:{line:81,column:9}},{start:{line:73,column:8},end:{line:81,column:9}}],line:73},"5":{loc:{start:{line:98,column:8},end:{line:106,column:9}},type:"if",locations:[{start:{line:98,column:8},end:{line:106,column:9}},{start:{line:98,column:8},end:{line:106,column:9}}],line:98},"6":{loc:{start:{line:127,column:14},end:{line:127,column:76}},type:"binary-expr",locations:[{start:{line:127,column:14},end:{line:127,column:25}},{start:{line:127,column:29},end:{line:127,column:76}}],line:127}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef2cdc774bf8f71734f6ca5a32b77e68f31d6a6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1oswnuiqra=function(){return actualCoverage;};}return actualCoverage;}cov_1oswnuiqra();const db=(cov_1oswnuiqra().s[0]++,require("../models"));const Food=(cov_1oswnuiqra().s[1]++,db.foods);const Op=(cov_1oswnuiqra().s[2]++,db.Sequelize.Op);// Create and Save a new Food
cov_1oswnuiqra().s[3]++;exports.create=(req,res)=>{cov_1oswnuiqra().f[0]++;cov_1oswnuiqra().s[4]++;// Validate request
if(!req.body.name){cov_1oswnuiqra().b[0][0]++;cov_1oswnuiqra().s[5]++;res.status(400).send({message:"Content can not be empty!"});cov_1oswnuiqra().s[6]++;return;}else{cov_1oswnuiqra().b[0][1]++;}// Create a Food
const food=(cov_1oswnuiqra().s[7]++,{name:req.body.name});// Save Food in the database
cov_1oswnuiqra().s[8]++;Food.create(food).then(data=>{cov_1oswnuiqra().f[1]++;cov_1oswnuiqra().s[9]++;res.send(data);}).catch(err=>{cov_1oswnuiqra().f[2]++;cov_1oswnuiqra().s[10]++;res.status(500).send({message:(cov_1oswnuiqra().b[1][0]++,err.message)||(cov_1oswnuiqra().b[1][1]++,"Error while creating new Food.")});});};// Retrieve all Foods from the database.
cov_1oswnuiqra().s[11]++;exports.findAll=(req,res)=>{cov_1oswnuiqra().f[3]++;const name=(cov_1oswnuiqra().s[12]++,req.query.name);var condition=(cov_1oswnuiqra().s[13]++,name?(cov_1oswnuiqra().b[2][0]++,{name:{[Op.iLike]:`%${name}%`}}):(cov_1oswnuiqra().b[2][1]++,null));cov_1oswnuiqra().s[14]++;Food.findAll({where:condition}).then(data=>{cov_1oswnuiqra().f[4]++;cov_1oswnuiqra().s[15]++;res.send(data);}).catch(err=>{cov_1oswnuiqra().f[5]++;cov_1oswnuiqra().s[16]++;res.status(500).send({message:(cov_1oswnuiqra().b[3][0]++,err.message)||(cov_1oswnuiqra().b[3][1]++,"Error while retrieving foods.")});});};// Find a single food with an id
cov_1oswnuiqra().s[17]++;exports.findOne=(req,res)=>{cov_1oswnuiqra().f[6]++;const id=(cov_1oswnuiqra().s[18]++,req.body.id);cov_1oswnuiqra().s[19]++;Food.findByPk(id).then(data=>{cov_1oswnuiqra().f[7]++;cov_1oswnuiqra().s[20]++;res.send(data);}).catch(err=>{cov_1oswnuiqra().f[8]++;cov_1oswnuiqra().s[21]++;res.status(500).send({message:"Error retrieving food with id="+id});});};// Update a Food by the id in the request
cov_1oswnuiqra().s[22]++;exports.update=(req,res)=>{cov_1oswnuiqra().f[9]++;const id=(cov_1oswnuiqra().s[23]++,req.body.id);cov_1oswnuiqra().s[24]++;Food.update(req.body,{where:{id:id}}).then(num=>{cov_1oswnuiqra().f[10]++;cov_1oswnuiqra().s[25]++;if(num==1){cov_1oswnuiqra().b[4][0]++;cov_1oswnuiqra().s[26]++;res.send({message:"Food was updated successfully."});}else{cov_1oswnuiqra().b[4][1]++;cov_1oswnuiqra().s[27]++;res.send({message:`Cannot update Food with id=${id}. Maybe Food was not found or req.body is empty!`});}}).catch(err=>{cov_1oswnuiqra().f[11]++;cov_1oswnuiqra().s[28]++;res.status(500).send({message:"Error updating Food with id="+id});});};// Delete a Food with the specified id in the request
cov_1oswnuiqra().s[29]++;exports.delete=(req,res)=>{cov_1oswnuiqra().f[12]++;const id=(cov_1oswnuiqra().s[30]++,req.body.id);cov_1oswnuiqra().s[31]++;Food.destroy({where:{id:id}}).then(num=>{cov_1oswnuiqra().f[13]++;cov_1oswnuiqra().s[32]++;if(num==1){cov_1oswnuiqra().b[5][0]++;cov_1oswnuiqra().s[33]++;res.send({message:"Food was deleted successfully!"});}else{cov_1oswnuiqra().b[5][1]++;cov_1oswnuiqra().s[34]++;res.send({message:`Cannot delete Food with id=${id}. Maybe Food was not found!`});}}).catch(err=>{cov_1oswnuiqra().f[14]++;cov_1oswnuiqra().s[35]++;res.status(500).send({message:"Could not delete User with id="+id});});};// Delete all Foods from the database.
cov_1oswnuiqra().s[36]++;exports.deleteAll=(req,res)=>{cov_1oswnuiqra().f[15]++;cov_1oswnuiqra().s[37]++;Food.destroy({where:{},truncate:false}).then(nums=>{cov_1oswnuiqra().f[16]++;cov_1oswnuiqra().s[38]++;res.send({message:`${nums} Foods were deleted successfully!`});}).catch(err=>{cov_1oswnuiqra().f[17]++;cov_1oswnuiqra().s[39]++;res.status(500).send({message:(cov_1oswnuiqra().b[6][0]++,err.message)||(cov_1oswnuiqra().b[6][1]++,"Some error occurred while removing all Foods.")});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvb2RzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiZGIiLCJyZXF1aXJlIiwiRm9vZCIsImZvb2RzIiwiT3AiLCJTZXF1ZWxpemUiLCJleHBvcnRzIiwiY3JlYXRlIiwicmVxIiwicmVzIiwiYm9keSIsIm5hbWUiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImZvb2QiLCJ0aGVuIiwiZGF0YSIsImNhdGNoIiwiZXJyIiwiZmluZEFsbCIsInF1ZXJ5IiwiY29uZGl0aW9uIiwiaUxpa2UiLCJ3aGVyZSIsImZpbmRPbmUiLCJpZCIsImZpbmRCeVBrIiwidXBkYXRlIiwibnVtIiwiZGVsZXRlIiwiZGVzdHJveSIsImRlbGV0ZUFsbCIsInRydW5jYXRlIiwibnVtcyJdLCJtYXBwaW5ncyI6Iml1T0FlWTsyRkFmWixLQUFNQSxDQUFBQSxFQUFFLDBCQUFHQyxPQUFPLENBQUMsV0FBRCxDQUFWLENBQVIsQ0FDQSxLQUFNQyxDQUFBQSxJQUFJLDBCQUFHRixFQUFFLENBQUNHLEtBQU4sQ0FBVixDQUNBLEtBQU1DLENBQUFBLEVBQUUsMEJBQUdKLEVBQUUsQ0FBQ0ssU0FBSCxDQUFhRCxFQUFoQixDQUFSLENBRUE7d0JBQ0FFLE9BQU8sQ0FBQ0MsTUFBUixDQUFpQixDQUFDQyxHQUFELENBQU1DLEdBQU4sR0FBYyxpREFDNUI7QUFDQSxHQUFJLENBQUNELEdBQUcsQ0FBQ0UsSUFBSixDQUFTQyxJQUFkLENBQXFCLG9EQUNwQkYsR0FBRyxDQUFDRyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDbkJDLE9BQU8sQ0FBRSwyQkFEVSxDQUFyQixFQURvQix3QkFJcEIsT0FDRCxDQUxBLGlDQU9EO0FBQ0EsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBRyxDQUNYSixJQUFJLENBQUVILEdBQUcsQ0FBQ0UsSUFBSixDQUFTQyxJQURKLENBQUgsQ0FBVixDQUlBO0FBZDZCLHdCQWU3QlQsSUFBSSxDQUFDSyxNQUFMLENBQVlRLElBQVosRUFDR0MsSUFESCxD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QUFlLCtDQUFmLENBRmlCLENBQXJCLEVBSUQsQ0FaTCxFQWFILENBZEQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYiA9IHJlcXVpcmUoXCIuLi9tb2RlbHNcIik7XG5jb25zdCBGb29kID0gZGIuZm9vZHM7XG5jb25zdCBPcCA9IGRiLlNlcXVlbGl6ZS5PcDtcblxuLy8gQ3JlYXRlIGFuZCBTYXZlIGEgbmV3IEZvb2RcbmV4cG9ydHMuY3JlYXRlID0gKHJlcSwgcmVzKSA9PiB7XG4gICAvLyBWYWxpZGF0ZSByZXF1ZXN0XG4gICBpZiAoIXJlcS5ib2R5Lm5hbWUgKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgbWVzc2FnZTogXCJDb250ZW50IGNhbiBub3QgYmUgZW1wdHkhXCJcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDcmVhdGUgYSBGb29kXG4gIGNvbnN0IGZvb2QgPSB7XG4gICAgbmFtZTogcmVxLmJvZHkubmFtZSxcbiAgfTtcblxuICAvLyBTYXZlIEZvb2QgaW4gdGhlIGRhdGFiYXNlXG4gIEZvb2QuY3JlYXRlKGZvb2QpXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICByZXMuc2VuZChkYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgIGVyci5tZXNzYWdlIHx8IFwiRXJyb3Igd2hpbGUgY3JlYXRpbmcgbmV3IEZvb2QuXCJcbiAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLy8gUmV0cmlldmUgYWxsIEZvb2RzIGZyb20gdGhlIGRhdGFiYXNlLlxuZXhwb3J0cy5maW5kQWxsID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IHJlcS5xdWVyeS5uYW1lO1xuICAgIHZhciBjb25kaXRpb24gPSBuYW1lID8geyBuYW1lOiB7IFtPcC5pTGlrZV06IGAlJHtuYW1lfSVgIH0gfSA6IG51bGw7XG4gIFxuICAgIEZvb2QuZmluZEFsbCh7IHdoZXJlOiBjb25kaXRpb24gfSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICByZXMuc2VuZChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICBlcnIubWVzc2FnZSB8fCBcIkVycm9yIHdoaWxlIHJldHJpZXZpbmcgZm9vZHMuXCJcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbn07XG5cbi8vIEZpbmQgYSBzaW5nbGUgZm9vZCB3aXRoIGFuIGlkXG5leHBvcnRzLmZpbmRPbmUgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBpZCA9IHJlcS5ib2R5LmlkO1xuXG4gICAgRm9vZC5maW5kQnlQayhpZClcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICByZXMuc2VuZChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgcmV0cmlldmluZyBmb29kIHdpdGggaWQ9XCIgKyBpZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xufTtcblxuLy8gVXBkYXRlIGEgRm9vZCBieSB0aGUgaWQgaW4gdGhlIHJlcXVlc3RcbmV4cG9ydHMudXBkYXRlID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgaWQgPSByZXEuYm9keS5pZDtcblxuICAgIEZvb2QudXBkYXRlKHJlcS5ib2R5LCB7XG4gICAgICB3aGVyZTogeyBpZDogaWQgfVxuICAgIH0pXG4gICAgICAudGhlbihudW0gPT4ge1xuICAgICAgICBpZiAobnVtID09IDEpIHtcbiAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZvb2Qgd2FzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LlwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgbWVzc2FnZTogYENhbm5vdCB1cGRhdGUgRm9vZCB3aXRoIGlkPSR7aWR9LiBNYXliZSBGb29kIHdhcyBub3QgZm91bmQgb3IgcmVxLmJvZHkgaXMgZW1wdHkhYFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkVycm9yIHVwZGF0aW5nIEZvb2Qgd2l0aCBpZD1cIiArIGlkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG59O1xuXG4vLyBEZWxldGUgYSBGb29kIHdpdGggdGhlIHNwZWNpZmllZCBpZCBpbiB0aGUgcmVxdWVzdFxuZXhwb3J0cy5kZWxldGUgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBpZCA9IHJlcS5ib2R5LmlkO1xuXG4gICAgRm9vZC5kZXN0cm95KHtcbiAgICAgIHdoZXJlOiB7IGlkOiBpZCB9XG4gICAgfSlcbiAgICAgIC50aGVuKG51bSA9PiB7XG4gICAgICAgIGlmIChudW0gPT0gMSkge1xuICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRm9vZCB3YXMgZGVsZXRlZCBzdWNjZXNzZnVsbHkhXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQ2Fubm90IGRlbGV0ZSBGb29kIHdpdGggaWQ9JHtpZH0uIE1heWJlIEZvb2Qgd2FzIG5vdCBmb3VuZCFgXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQ291bGQgbm90IGRlbGV0ZSBVc2VyIHdpdGggaWQ9XCIgKyBpZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xufTtcblxuLy8gRGVsZXRlIGFsbCBGb29kcyBmcm9tIHRoZSBkYXRhYmFzZS5cbmV4cG9ydHMuZGVsZXRlQWxsID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgRm9vZC5kZXN0cm95KHtcbiAgICAgICAgd2hlcmU6IHt9LFxuICAgICAgICB0cnVuY2F0ZTogZmFsc2VcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKG51bXMgPT4ge1xuICAgICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogYCR7bnVtc30gRm9vZHMgd2VyZSBkZWxldGVkIHN1Y2Nlc3NmdWxseSFgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgICBlcnIubWVzc2FnZSB8fCBcIlNvbWUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVtb3ZpbmcgYWxsIEZvb2RzLlwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xufTtcblxuIl19