function cov_yc3atzjj5(){var path="/home/manuel/Desktop/ProyIntegral/app/controllers/records.controller.js";var hash="483886d836adb38207c3b542ace5cfb1c63cecf1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/manuel/Desktop/ProyIntegral/app/controllers/records.controller.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:2,column:15},end:{line:2,column:25}},"2":{start:{line:3,column:11},end:{line:3,column:26}},"3":{start:{line:6,column:0},end:{line:46,column:2}},"4":{start:{line:8,column:3},end:{line:8,column:25}},"5":{start:{line:9,column:3},end:{line:15,column:3}},"6":{start:{line:11,column:4},end:{line:13,column:7}},"7":{start:{line:14,column:4},end:{line:14,column:11}},"8":{start:{line:17,column:4},end:{line:25,column:5}},"9":{start:{line:18,column:18},end:{line:18,column:46}},"10":{start:{line:21,column:6},end:{line:23,column:9}},"11":{start:{line:24,column:6},end:{line:24,column:13}},"12":{start:{line:28,column:17},end:{line:33,column:3}},"13":{start:{line:36,column:2},end:{line:45,column:7}},"14":{start:{line:38,column:6},end:{line:38,column:21}},"15":{start:{line:41,column:6},end:{line:44,column:9}},"16":{start:{line:49,column:0},end:{line:64,column:2}},"17":{start:{line:50,column:19},end:{line:50,column:35}},"18":{start:{line:52,column:20},end:{line:52,column:36}},"19":{start:{line:54,column:4},end:{line:63,column:9}},"20":{start:{line:56,column:8},end:{line:56,column:23}},"21":{start:{line:59,column:8},end:{line:62,column:11}},"22":{start:{line:67,column:0},end:{line:79,column:2}},"23":{start:{line:68,column:15},end:{line:68,column:28}},"24":{start:{line:70,column:4},end:{line:78,column:9}},"25":{start:{line:72,column:8},end:{line:72,column:23}},"26":{start:{line:75,column:8},end:{line:77,column:11}},"27":{start:{line:82,column:0},end:{line:104,column:2}},"28":{start:{line:83,column:15},end:{line:83,column:26}},"29":{start:{line:85,column:4},end:{line:103,column:9}},"30":{start:{line:89,column:8},end:{line:97,column:9}},"31":{start:{line:90,column:10},end:{line:92,column:13}},"32":{start:{line:94,column:10},end:{line:96,column:13}},"33":{start:{line:100,column:8},end:{line:102,column:11}},"34":{start:{line:107,column:0},end:{line:132,column:2}},"35":{start:{line:108,column:4},end:{line:108,column:21}},"36":{start:{line:109,column:15},end:{line:109,column:26}},"37":{start:{line:111,column:4},end:{line:131,column:9}},"38":{start:{line:115,column:8},end:{line:125,column:9}},"39":{start:{line:116,column:10},end:{line:119,column:13}},"40":{start:{line:121,column:10},end:{line:121,column:27}},"41":{start:{line:122,column:10},end:{line:124,column:13}},"42":{start:{line:128,column:8},end:{line:130,column:11}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:31},end:{line:46,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:37,column:10},end:{line:37,column:11}},loc:{start:{line:37,column:18},end:{line:39,column:5}},line:37},"2":{name:"(anonymous_2)",decl:{start:{line:40,column:11},end:{line:40,column:12}},loc:{start:{line:40,column:18},end:{line:45,column:5}},line:40},"3":{name:"(anonymous_3)",decl:{start:{line:49,column:18},end:{line:49,column:19}},loc:{start:{line:49,column:32},end:{line:64,column:1}},line:49},"4":{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:20},end:{line:57,column:7}},line:55},"5":{name:"(anonymous_5)",decl:{start:{line:58,column:13},end:{line:58,column:14}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},"6":{name:"(anonymous_6)",decl:{start:{line:67,column:18},end:{line:67,column:19}},loc:{start:{line:67,column:32},end:{line:79,column:1}},line:67},"7":{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:20},end:{line:73,column:7}},line:71},"8":{name:"(anonymous_8)",decl:{start:{line:74,column:13},end:{line:74,column:14}},loc:{start:{line:74,column:20},end:{line:78,column:7}},line:74},"9":{name:"(anonymous_9)",decl:{start:{line:82,column:17},end:{line:82,column:18}},loc:{start:{line:82,column:31},end:{line:104,column:1}},line:82},"10":{name:"(anonymous_10)",decl:{start:{line:88,column:12},end:{line:88,column:13}},loc:{start:{line:88,column:19},end:{line:98,column:7}},line:88},"11":{name:"(anonymous_11)",decl:{start:{line:99,column:13},end:{line:99,column:14}},loc:{start:{line:99,column:20},end:{line:103,column:7}},line:99},"12":{name:"(anonymous_12)",decl:{start:{line:107,column:17},end:{line:107,column:18}},loc:{start:{line:107,column:31},end:{line:132,column:1}},line:107},"13":{name:"(anonymous_13)",decl:{start:{line:114,column:12},end:{line:114,column:13}},loc:{start:{line:114,column:19},end:{line:126,column:7}},line:114},"14":{name:"(anonymous_14)",decl:{start:{line:127,column:13},end:{line:127,column:14}},loc:{start:{line:127,column:20},end:{line:131,column:7}},line:127}},branchMap:{"0":{loc:{start:{line:9,column:3},end:{line:15,column:3}},type:"if",locations:[{start:{line:9,column:3},end:{line:15,column:3}},{start:{line:9,column:3},end:{line:15,column:3}}],line:9},"1":{loc:{start:{line:9,column:7},end:{line:9,column:92}},type:"binary-expr",locations:[{start:{line:9,column:7},end:{line:9,column:25}},{start:{line:9,column:29},end:{line:9,column:49}},{start:{line:9,column:53},end:{line:9,column:72}},{start:{line:9,column:76},end:{line:9,column:92}}],line:9},"2":{loc:{start:{line:43,column:10},end:{line:43,column:59}},type:"binary-expr",locations:[{start:{line:43,column:10},end:{line:43,column:21}},{start:{line:43,column:25},end:{line:43,column:59}}],line:43},"3":{loc:{start:{line:61,column:12},end:{line:61,column:60}},type:"binary-expr",locations:[{start:{line:61,column:12},end:{line:61,column:23}},{start:{line:61,column:27},end:{line:61,column:60}}],line:61},"4":{loc:{start:{line:89,column:8},end:{line:97,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:97,column:9}},{start:{line:89,column:8},end:{line:97,column:9}}],line:89},"5":{loc:{start:{line:115,column:8},end:{line:125,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:125,column:9}},{start:{line:115,column:8},end:{line:125,column:9}}],line:115}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"483886d836adb38207c3b542ace5cfb1c63cecf1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_yc3atzjj5=function(){return actualCoverage;};}return actualCoverage;}cov_yc3atzjj5();const db=(cov_yc3atzjj5().s[0]++,require("../models"));const Record=(cov_yc3atzjj5().s[1]++,db.records);const Op=(cov_yc3atzjj5().s[2]++,db.Sequelize.Op);// Create and Save a new Record
cov_yc3atzjj5().s[3]++;exports.create=(req,res)=>{cov_yc3atzjj5().f[0]++;cov_yc3atzjj5().s[4]++;// Validate request
console.log(req.body);cov_yc3atzjj5().s[5]++;if((cov_yc3atzjj5().b[1][0]++,!req.body.foodName)||(cov_yc3atzjj5().b[1][1]++,!req.body.gramAmount)||(cov_yc3atzjj5().b[1][2]++,!req.body.dateEaten)||(cov_yc3atzjj5().b[1][3]++,!req.body.userID)){cov_yc3atzjj5().b[0][0]++;cov_yc3atzjj5().s[6]++;res.status(400).send({message:"Content can not be empty!"});cov_yc3atzjj5().s[7]++;return;}else{cov_yc3atzjj5().b[0][1]++;}//Check date format
cov_yc3atzjj5().s[8]++;try{let aDate=(cov_yc3atzjj5().s[9]++,new Date(req.body.dateEaten));}catch(err){cov_yc3atzjj5().s[10]++;res.status(400).send({message:"Bad Date Format"});cov_yc3atzjj5().s[11]++;return;};// Create a Record
const record=(cov_yc3atzjj5().s[12]++,{foodName:req.body.foodName,gramAmount:parseInt(req.body.gramAmount),userID:parseInt(req.body.userID),dateEaten:new Date(req.body.dateEaten)});// Save Record in the database
cov_yc3atzjj5().s[13]++;Record.create(record).then(data=>{cov_yc3atzjj5().f[1]++;cov_yc3atzjj5().s[14]++;res.send(data);}).catch(err=>{cov_yc3atzjj5().f[2]++;cov_yc3atzjj5().s[15]++;res.status(500).send({message:(cov_yc3atzjj5().b[2][0]++,err.message)||(cov_yc3atzjj5().b[2][1]++,"Error while creating new Record.")});});};// Retrieve all Records from the database. CAMBIAR PARA HACER UN RETRIEVE SEGUN UN USERID
cov_yc3atzjj5().s[16]++;exports.findAll=(req,res)=>{cov_yc3atzjj5().f[3]++;const userID=(cov_yc3atzjj5().s[17]++,req.query.userID);//console.log(req);
var condition=(cov_yc3atzjj5().s[18]++,{userID:userID});cov_yc3atzjj5().s[19]++;Record.findAll({where:condition}).then(data=>{cov_yc3atzjj5().f[4]++;cov_yc3atzjj5().s[20]++;res.send(data);}).catch(err=>{cov_yc3atzjj5().f[5]++;cov_yc3atzjj5().s[21]++;res.status(500).send({message:(cov_yc3atzjj5().b[3][0]++,err.message)||(cov_yc3atzjj5().b[3][1]++,"Error while retrieving Records.")});});};// Find a single Record with an id
cov_yc3atzjj5().s[22]++;exports.findOne=(req,res)=>{cov_yc3atzjj5().f[6]++;const id=(cov_yc3atzjj5().s[23]++,req.params.id);cov_yc3atzjj5().s[24]++;Record.findByPk(id).then(data=>{cov_yc3atzjj5().f[7]++;cov_yc3atzjj5().s[25]++;res.send(data);}).catch(err=>{cov_yc3atzjj5().f[8]++;cov_yc3atzjj5().s[26]++;res.status(500).send({message:"Error retrieving Record with id="+id});});};// Update a Record by the id in the request
cov_yc3atzjj5().s[27]++;exports.update=(req,res)=>{cov_yc3atzjj5().f[9]++;const id=(cov_yc3atzjj5().s[28]++,req.body.id);cov_yc3atzjj5().s[29]++;Record.update(req.body,{where:{id:id}}).then(num=>{cov_yc3atzjj5().f[10]++;cov_yc3atzjj5().s[30]++;if(num==1){cov_yc3atzjj5().b[4][0]++;cov_yc3atzjj5().s[31]++;res.send({message:"Record was updated successfully."});}else{cov_yc3atzjj5().b[4][1]++;cov_yc3atzjj5().s[32]++;res.send({message:`Cannot update Record with id=${id}. Maybe Record was not found or req.body is empty!`});}}).catch(err=>{cov_yc3atzjj5().f[11]++;cov_yc3atzjj5().s[33]++;res.status(500).send({message:"Error updating Record with id="+id});});};// Delete a Record with the specified id in the request
cov_yc3atzjj5().s[34]++;exports.delete=(req,res)=>{cov_yc3atzjj5().f[12]++;cov_yc3atzjj5().s[35]++;console.log(req);const id=(cov_yc3atzjj5().s[36]++,req.body.id);cov_yc3atzjj5().s[37]++;Record.destroy({where:{id:id}}).then(num=>{cov_yc3atzjj5().f[13]++;cov_yc3atzjj5().s[38]++;if(num==1){cov_yc3atzjj5().b[5][0]++;cov_yc3atzjj5().s[39]++;res.send({message:"Record was deleted successfully!",deletedRecordID:id});}else{cov_yc3atzjj5().b[5][1]++;cov_yc3atzjj5().s[40]++;console.log(num);cov_yc3atzjj5().s[41]++;res.send({message:`Cannot delete Record with id=${id}. Maybe Record was not found!`});}}).catch(err=>{cov_yc3atzjj5().f[14]++;cov_yc3atzjj5().s[42]++;res.status(500).send({message:"Could not delete User with id="+id});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29yZHMuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJSZWNvcmQiLCJyZWNvcmRzIiwiT3AiLCJTZXF1ZWxpemUiLCJleHBvcnRzIiwiY3JlYXRlIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJmb29kTmFtZSIsImdyYW1BbW91bnQiLCJkYXRlRWF0ZW4iLCJ1c2VySUQiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImFEYXRlIiwiRGF0ZSIsImVyciIsInJlY29yZCIsInBhcnNlSW50IiwidGhlbiIsImRhdGEiLCJjYXRjaCIsImZpbmRBbGwiLCJxdWVyeSIsImNvbmRpdGlvbiIsIndoZXJlIiwiZmluZE9uZSIsImlkIiwicGFyYW1zIiwiZmluZEJ5UGsiLCJ1cGRhdGUiLCJudW0iLCJkZWxldGUiLCJkZXN0cm95IiwiZGVsZXRlZFJlY29yZElEIl0sIm1hcHBpbmdzIjoibTFOQWVZO3lGQWZaLEtBQU1BLENBQUFBLEVBQUUseUJBQUdDLE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBUixDQUNBLEtBQU1DLENBQUFBLE1BQU0seUJBQUdGLEVBQUUsQ0FBQ0csT0FBTixDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsRUFBRSx5QkFBR0osRUFBRSxDQUFDSyxTQUFILENBQWFELEVBQWhCLENBQVIsQ0FFQTt1QkFDQUUsT0FBTyxDQUFDQyxNQUFSLENBQWlCLENBQUNDLEdBQUQsQ0FBTUMsR0FBTixHQUFjLCtDQUM1QjtBQUNBQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsR0FBRyxDQUFDSSxJQUFoQixFQUY0Qix1QkFHNUIsR0FBSSw0QkFBQ0osR0FBRyxDQUFDSSxJQUFKLENBQVNDLFFBQVYsOEJBQXNCLENBQUNMLEdBQUcsQ0FBQ0ksSUFBSixDQUFTRSxVQUFoQyw4QkFBOEMsQ0FBQ04sR0FBRyxDQUFDSSxJQUFKLENBQVNHLFNBQXhELDhCQUFxRSxDQUFDUCxHQUFHLENBQUNJLElBQUosQ0FBU0ksTUFBL0UsQ0FB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LEdBQUcsQ0FBQ1MsSUFBSixDQUFTLENBQ1BDLE9BQU8sQ0FBRSxrQ0FERixDQUVQcUIsZUFBZSxDQUFFUCxFQUZWLENBQVQsRUFJRCxDQUxELElBS08sbURBQ0x2QixPQUFPLENBQUNDLEdBQVIsQ0FBWTBCLEdBQVosRUFESyx3QkFFTDVCLEdBQUcsQ0FBQ1MsSUFBSixDQUFTLENBQ1BDLE9BQU8sQ0FBRyxnQ0FBK0JjLEVBQUcsK0JBRHJDLENBQVQsRUFHRCxDQUNGLENBZkgsRUFnQkdOLEtBaEJILENBZ0JTTCxHQUFHLEVBQUksaURBQ1piLEdBQUcsQ0FBQ1EsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ25CQyxPQUFPLENBQUUsaUNBQW1DYyxFQUR6QixDQUFyQixFQUdELENBcEJILEVBcUJILENBekJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vbW9kZWxzXCIpO1xuY29uc3QgUmVjb3JkID0gZGIucmVjb3JkcztcbmNvbnN0IE9wID0gZGIuU2VxdWVsaXplLk9wO1xuXG4vLyBDcmVhdGUgYW5kIFNhdmUgYSBuZXcgUmVjb3JkXG5leHBvcnRzLmNyZWF0ZSA9IChyZXEsIHJlcykgPT4ge1xuICAgLy8gVmFsaWRhdGUgcmVxdWVzdFxuICAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xuICAgaWYgKCFyZXEuYm9keS5mb29kTmFtZSB8fCAhcmVxLmJvZHkuZ3JhbUFtb3VudCB8fCAhcmVxLmJvZHkuZGF0ZUVhdGVuIHx8ICFyZXEuYm9keS51c2VySUQgKSB7XG4gICAgXG4gICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgbWVzc2FnZTogXCJDb250ZW50IGNhbiBub3QgYmUgZW1wdHkhXCJcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgICAvL0NoZWNrIGRhdGUgZm9ybWF0XG4gICAgdHJ5e1xuICAgICAgbGV0IGFEYXRlID0gbmV3IERhdGUocmVxLmJvZHkuZGF0ZUVhdGVuKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycil7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6IFwiQmFkIERhdGUgRm9ybWF0XCJcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH07XG5cbiAgLy8gQ3JlYXRlIGEgUmVjb3JkXG4gIGNvbnN0IHJlY29yZCA9IHtcbiAgICBmb29kTmFtZTogcmVxLmJvZHkuZm9vZE5hbWUsXG4gICAgZ3JhbUFtb3VudDogcGFyc2VJbnQocmVxLmJvZHkuZ3JhbUFtb3VudCksXG4gICAgdXNlcklEOiBwYXJzZUludChyZXEuYm9keS51c2VySUQpLFxuICAgIGRhdGVFYXRlbjogbmV3IERhdGUocmVxLmJvZHkuZGF0ZUVhdGVuKSxcbiAgfTtcblxuICAvLyBTYXZlIFJlY29yZCBpbiB0aGUgZGF0YWJhc2VcbiAgUmVjb3JkLmNyZWF0ZShyZWNvcmQpXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICByZXMuc2VuZChkYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgIGVyci5tZXNzYWdlIHx8IFwiRXJyb3Igd2hpbGUgY3JlYXRpbmcgbmV3IFJlY29yZC5cIlxuICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vLyBSZXRyaWV2ZSBhbGwgUmVjb3JkcyBmcm9tIHRoZSBkYXRhYmFzZS4gQ0FNQklBUiBQQVJBIEhBQ0VSIFVOIFJFVFJJRVZFIFNFR1VOIFVOIFVTRVJJRFxuZXhwb3J0cy5maW5kQWxsID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXNlcklEID0gcmVxLnF1ZXJ5LnVzZXJJRDtcbiAgICAvL2NvbnNvbGUubG9nKHJlcSk7XG4gICAgdmFyIGNvbmRpdGlvbiA9IHt1c2VySUQ6IHVzZXJJRH07XG4gIFxuICAgIFJlY29yZC5maW5kQWxsKHsgd2hlcmU6IGNvbmRpdGlvbiB9KVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIHJlcy5zZW5kKGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XG4gICAgICAgICAgbWVzc2FnZTpcbiAgICAgICAgICAgIGVyci5tZXNzYWdlIHx8IFwiRXJyb3Igd2hpbGUgcmV0cmlldmluZyBSZWNvcmRzLlwiXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG59O1xuXG4vLyBGaW5kIGEgc2luZ2xlIFJlY29yZCB3aXRoIGFuIGlkXG5leHBvcnRzLmZpbmRPbmUgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuaWQ7XG5cbiAgICBSZWNvcmQuZmluZEJ5UGsoaWQpXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgcmVzLnNlbmQoZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkVycm9yIHJldHJpZXZpbmcgUmVjb3JkIHdpdGggaWQ9XCIgKyBpZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xufTtcblxuLy8gVXBkYXRlIGEgUmVjb3JkIGJ5IHRoZSBpZCBpbiB0aGUgcmVxdWVzdFxuZXhwb3J0cy51cGRhdGUgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBpZCA9IHJlcS5ib2R5LmlkO1xuXG4gICAgUmVjb3JkLnVwZGF0ZShyZXEuYm9keSwge1xuICAgICAgd2hlcmU6IHsgaWQ6IGlkIH1cbiAgICB9KVxuICAgICAgLnRoZW4obnVtID0+IHtcbiAgICAgICAgaWYgKG51bSA9PSAxKSB7XG4gICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWNvcmQgd2FzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LlwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgbWVzc2FnZTogYENhbm5vdCB1cGRhdGUgUmVjb3JkIHdpdGggaWQ9JHtpZH0uIE1heWJlIFJlY29yZCB3YXMgbm90IGZvdW5kIG9yIHJlcS5ib2R5IGlzIGVtcHR5IWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XG4gICAgICAgICAgbWVzc2FnZTogXCJFcnJvciB1cGRhdGluZyBSZWNvcmQgd2l0aCBpZD1cIiArIGlkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG59O1xuXG4vLyBEZWxldGUgYSBSZWNvcmQgd2l0aCB0aGUgc3BlY2lmaWVkIGlkIGluIHRoZSByZXF1ZXN0XG5leHBvcnRzLmRlbGV0ZSA9IChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnNvbGUubG9nKHJlcSk7XG4gICAgY29uc3QgaWQgPSByZXEuYm9keS5pZDtcblxuICAgIFJlY29yZC5kZXN0cm95KHtcbiAgICAgIHdoZXJlOiB7IGlkOiBpZCB9XG4gICAgfSlcbiAgICAgIC50aGVuKG51bSA9PiB7XG4gICAgICAgIGlmIChudW0gPT0gMSkge1xuICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVjb3JkIHdhcyBkZWxldGVkIHN1Y2Nlc3NmdWxseSFcIixcbiAgICAgICAgICAgIGRlbGV0ZWRSZWNvcmRJRDogaWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2cobnVtKTtcbiAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQ2Fubm90IGRlbGV0ZSBSZWNvcmQgd2l0aCBpZD0ke2lkfS4gTWF5YmUgUmVjb3JkIHdhcyBub3QgZm91bmQhYFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkNvdWxkIG5vdCBkZWxldGUgVXNlciB3aXRoIGlkPVwiICsgaWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbn07XG5cbiJdfQ==