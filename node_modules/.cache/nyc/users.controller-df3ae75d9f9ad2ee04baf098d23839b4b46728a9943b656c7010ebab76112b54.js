function cov_1ey42m904a(){var path="/home/manuel/Desktop/ProyIntegral/app/controllers/users.controller.js";var hash="0c4504c9eddb72815b05866a76d5b75ef349cfe9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/manuel/Desktop/ProyIntegral/app/controllers/users.controller.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:2,column:13},end:{line:2,column:21}},"2":{start:{line:3,column:11},end:{line:3,column:26}},"3":{start:{line:6,column:0},end:{line:49,column:2}},"4":{start:{line:8,column:2},end:{line:14,column:3}},"5":{start:{line:10,column:4},end:{line:12,column:7}},"6":{start:{line:13,column:4},end:{line:13,column:10}},"7":{start:{line:16,column:2},end:{line:24,column:3}},"8":{start:{line:17,column:16},end:{line:17,column:43}},"9":{start:{line:20,column:4},end:{line:22,column:7}},"10":{start:{line:23,column:4},end:{line:23,column:11}},"11":{start:{line:27,column:15},end:{line:36,column:3}},"12":{start:{line:39,column:2},end:{line:48,column:7}},"13":{start:{line:41,column:6},end:{line:41,column:21}},"14":{start:{line:44,column:6},end:{line:47,column:9}},"15":{start:{line:52,column:0},end:{line:66,column:2}},"16":{start:{line:53,column:17},end:{line:53,column:31}},"17":{start:{line:54,column:20},end:{line:54,column:71}},"18":{start:{line:56,column:4},end:{line:65,column:9}},"19":{start:{line:58,column:8},end:{line:58,column:23}},"20":{start:{line:61,column:8},end:{line:64,column:11}},"21":{start:{line:69,column:0},end:{line:87,column:2}},"22":{start:{line:70,column:15},end:{line:70,column:28}},"23":{start:{line:71,column:4},end:{line:71,column:21}},"24":{start:{line:73,column:4},end:{line:86,column:9}},"25":{start:{line:75,column:8},end:{line:79,column:9}},"26":{start:{line:76,column:10},end:{line:78,column:11}},"27":{start:{line:80,column:8},end:{line:80,column:23}},"28":{start:{line:83,column:8},end:{line:85,column:11}},"29":{start:{line:90,column:0},end:{line:114,column:2}},"30":{start:{line:91,column:15},end:{line:91,column:28}},"31":{start:{line:93,column:4},end:{line:93,column:20}},"32":{start:{line:95,column:4},end:{line:113,column:9}},"33":{start:{line:99,column:8},end:{line:107,column:9}},"34":{start:{line:100,column:10},end:{line:102,column:13}},"35":{start:{line:104,column:10},end:{line:106,column:13}},"36":{start:{line:110,column:8},end:{line:112,column:11}},"37":{start:{line:117,column:0},end:{line:140,column:2}},"38":{start:{line:118,column:2},end:{line:118,column:19}},"39":{start:{line:119,column:15},end:{line:119,column:28}},"40":{start:{line:121,column:4},end:{line:139,column:9}},"41":{start:{line:125,column:8},end:{line:133,column:9}},"42":{start:{line:126,column:10},end:{line:128,column:13}},"43":{start:{line:130,column:10},end:{line:132,column:13}},"44":{start:{line:136,column:8},end:{line:138,column:11}},"45":{start:{line:143,column:0},end:{line:157,column:2}},"46":{start:{line:144,column:4},end:{line:156,column:11}},"47":{start:{line:149,column:10},end:{line:149,column:80}},"48":{start:{line:152,column:10},end:{line:155,column:13}},"49":{start:{line:160,column:0},end:{line:180,column:2}},"50":{start:{line:161,column:2},end:{line:161,column:24}},"51":{start:{line:162,column:2},end:{line:167,column:3}},"52":{start:{line:163,column:4},end:{line:165,column:7}},"53":{start:{line:166,column:4},end:{line:166,column:11}},"54":{start:{line:168,column:16},end:{line:168,column:30}},"55":{start:{line:169,column:19},end:{line:169,column:49}},"56":{start:{line:171,column:2},end:{line:179,column:7}},"57":{start:{line:173,column:6},end:{line:173,column:21}},"58":{start:{line:176,column:6},end:{line:178,column:9}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:31},end:{line:49,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:40,column:10},end:{line:40,column:11}},loc:{start:{line:40,column:18},end:{line:42,column:5}},line:40},"2":{name:"(anonymous_2)",decl:{start:{line:43,column:11},end:{line:43,column:12}},loc:{start:{line:43,column:18},end:{line:48,column:5}},line:43},"3":{name:"(anonymous_3)",decl:{start:{line:52,column:18},end:{line:52,column:19}},loc:{start:{line:52,column:32},end:{line:66,column:1}},line:52},"4":{name:"(anonymous_4)",decl:{start:{line:57,column:12},end:{line:57,column:13}},loc:{start:{line:57,column:20},end:{line:59,column:7}},line:57},"5":{name:"(anonymous_5)",decl:{start:{line:60,column:13},end:{line:60,column:14}},loc:{start:{line:60,column:20},end:{line:65,column:7}},line:60},"6":{name:"(anonymous_6)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:32},end:{line:87,column:1}},line:69},"7":{name:"(anonymous_7)",decl:{start:{line:74,column:12},end:{line:74,column:13}},loc:{start:{line:74,column:20},end:{line:81,column:7}},line:74},"8":{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:20},end:{line:86,column:7}},line:82},"9":{name:"(anonymous_9)",decl:{start:{line:90,column:17},end:{line:90,column:18}},loc:{start:{line:90,column:31},end:{line:114,column:1}},line:90},"10":{name:"(anonymous_10)",decl:{start:{line:98,column:12},end:{line:98,column:13}},loc:{start:{line:98,column:19},end:{line:108,column:7}},line:98},"11":{name:"(anonymous_11)",decl:{start:{line:109,column:13},end:{line:109,column:14}},loc:{start:{line:109,column:20},end:{line:113,column:7}},line:109},"12":{name:"(anonymous_12)",decl:{start:{line:117,column:17},end:{line:117,column:18}},loc:{start:{line:117,column:31},end:{line:140,column:1}},line:117},"13":{name:"(anonymous_13)",decl:{start:{line:124,column:12},end:{line:124,column:13}},loc:{start:{line:124,column:19},end:{line:134,column:7}},line:124},"14":{name:"(anonymous_14)",decl:{start:{line:135,column:13},end:{line:135,column:14}},loc:{start:{line:135,column:20},end:{line:139,column:7}},line:135},"15":{name:"(anonymous_15)",decl:{start:{line:143,column:20},end:{line:143,column:21}},loc:{start:{line:143,column:34},end:{line:157,column:1}},line:143},"16":{name:"(anonymous_16)",decl:{start:{line:148,column:14},end:{line:148,column:15}},loc:{start:{line:148,column:22},end:{line:150,column:9}},line:148},"17":{name:"(anonymous_17)",decl:{start:{line:151,column:15},end:{line:151,column:16}},loc:{start:{line:151,column:22},end:{line:156,column:9}},line:151},"18":{name:"(anonymous_18)",decl:{start:{line:160,column:16},end:{line:160,column:17}},loc:{start:{line:160,column:30},end:{line:180,column:1}},line:160},"19":{name:"(anonymous_19)",decl:{start:{line:172,column:10},end:{line:172,column:11}},loc:{start:{line:172,column:18},end:{line:174,column:5}},line:172},"20":{name:"(anonymous_20)",decl:{start:{line:175,column:11},end:{line:175,column:12}},loc:{start:{line:175,column:18},end:{line:179,column:5}},line:175}},branchMap:{"0":{loc:{start:{line:8,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:14,column:3}},{start:{line:8,column:2},end:{line:14,column:3}}],line:8},"1":{loc:{start:{line:8,column:6},end:{line:8,column:164}},type:"binary-expr",locations:[{start:{line:8,column:6},end:{line:8,column:20}},{start:{line:8,column:24},end:{line:8,column:41}},{start:{line:8,column:45},end:{line:8,column:60}},{start:{line:8,column:64},end:{line:8,column:82}},{start:{line:8,column:86},end:{line:8,column:102}},{start:{line:8,column:106},end:{line:8,column:122}},{start:{line:8,column:126},end:{line:8,column:142}},{start:{line:8,column:146},end:{line:8,column:164}}],line:8},"2":{loc:{start:{line:46,column:10},end:{line:46,column:57}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:21}},{start:{line:46,column:25},end:{line:46,column:57}}],line:46},"3":{loc:{start:{line:54,column:20},end:{line:54,column:71}},type:"cond-expr",locations:[{start:{line:54,column:27},end:{line:54,column:64}},{start:{line:54,column:67},end:{line:54,column:71}}],line:54},"4":{loc:{start:{line:63,column:12},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:12},end:{line:63,column:23}},{start:{line:63,column:27},end:{line:63,column:58}}],line:63},"5":{loc:{start:{line:75,column:8},end:{line:79,column:9}},type:"if",locations:[{start:{line:75,column:8},end:{line:79,column:9}},{start:{line:75,column:8},end:{line:79,column:9}}],line:75},"6":{loc:{start:{line:99,column:8},end:{line:107,column:9}},type:"if",locations:[{start:{line:99,column:8},end:{line:107,column:9}},{start:{line:99,column:8},end:{line:107,column:9}}],line:99},"7":{loc:{start:{line:125,column:8},end:{line:133,column:9}},type:"if",locations:[{start:{line:125,column:8},end:{line:133,column:9}},{start:{line:125,column:8},end:{line:133,column:9}}],line:125},"8":{loc:{start:{line:154,column:14},end:{line:154,column:80}},type:"binary-expr",locations:[{start:{line:154,column:14},end:{line:154,column:25}},{start:{line:154,column:29},end:{line:154,column:80}}],line:154},"9":{loc:{start:{line:162,column:2},end:{line:167,column:3}},type:"if",locations:[{start:{line:162,column:2},end:{line:167,column:3}},{start:{line:162,column:2},end:{line:167,column:3}}],line:162},"10":{loc:{start:{line:162,column:6},end:{line:162,column:43}},type:"binary-expr",locations:[{start:{line:162,column:6},end:{line:162,column:21}},{start:{line:162,column:25},end:{line:162,column:43}}],line:162}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},b:{"0":[0,0],"1":[0,0,0,0,0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0c4504c9eddb72815b05866a76d5b75ef349cfe9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1ey42m904a=function(){return actualCoverage;};}return actualCoverage;}cov_1ey42m904a();const db=(cov_1ey42m904a().s[0]++,require("../models"));const User=(cov_1ey42m904a().s[1]++,db.users);const Op=(cov_1ey42m904a().s[2]++,db.Sequelize.Op);// Create and Save a new User
cov_1ey42m904a().s[3]++;exports.create=(req,res)=>{cov_1ey42m904a().f[0]++;cov_1ey42m904a().s[4]++;// Validate request
if((cov_1ey42m904a().b[1][0]++,!req.body.name)||(cov_1ey42m904a().b[1][1]++,!req.body.surname)||(cov_1ey42m904a().b[1][2]++,!req.body.email)||(cov_1ey42m904a().b[1][3]++,!req.body.password)||(cov_1ey42m904a().b[1][4]++,!req.body.gender)||(cov_1ey42m904a().b[1][5]++,!req.body.weight)||(cov_1ey42m904a().b[1][6]++,!req.body.height)||(cov_1ey42m904a().b[1][7]++,!req.body.birthday)){cov_1ey42m904a().b[0][0]++;cov_1ey42m904a().s[5]++;res.status(400).send({message:"Content can not be empty!"});cov_1ey42m904a().s[6]++;return;}else{cov_1ey42m904a().b[0][1]++;}//Check date format
cov_1ey42m904a().s[7]++;try{let aDate=(cov_1ey42m904a().s[8]++,new Date(req.body.birthday));}catch(err){cov_1ey42m904a().s[9]++;res.status(400).send({message:"Bad Date Format"});cov_1ey42m904a().s[10]++;return;};// Create a User
const user=(cov_1ey42m904a().s[11]++,{name:req.body.name,surname:req.body.surname,email:req.body.email,password:req.body.password,birthday:new Date(req.body.birthday),gender:req.body.gender,weight:req.body.weight,height:req.body.height});// Save User in the database
cov_1ey42m904a().s[12]++;User.create(user).then(data=>{cov_1ey42m904a().f[1]++;cov_1ey42m904a().s[13]++;res.send(data);}).catch(err=>{cov_1ey42m904a().f[2]++;cov_1ey42m904a().s[14]++;res.status(500).send({message:(cov_1ey42m904a().b[2][0]++,err.message)||(cov_1ey42m904a().b[2][1]++,"Error while creating new User.")});});};// Retrieve all Users from the database.
cov_1ey42m904a().s[15]++;exports.findAll=(req,res)=>{cov_1ey42m904a().f[3]++;const name=(cov_1ey42m904a().s[16]++,req.query.name);var condition=(cov_1ey42m904a().s[17]++,name?(cov_1ey42m904a().b[3][0]++,{name:{[Op.iLike]:`%${name}%`}}):(cov_1ey42m904a().b[3][1]++,null));cov_1ey42m904a().s[18]++;User.findAll({where:condition}).then(data=>{cov_1ey42m904a().f[4]++;cov_1ey42m904a().s[19]++;res.send(data);}).catch(err=>{cov_1ey42m904a().f[5]++;cov_1ey42m904a().s[20]++;res.status(500).send({message:(cov_1ey42m904a().b[4][0]++,err.message)||(cov_1ey42m904a().b[4][1]++,"Error while retrieving users.")});});};// Find a single name with an id
cov_1ey42m904a().s[21]++;exports.findOne=(req,res)=>{cov_1ey42m904a().f[6]++;const id=(cov_1ey42m904a().s[22]++,req.params.id);cov_1ey42m904a().s[23]++;console.log(req);cov_1ey42m904a().s[24]++;User.findByPk(id).then(data=>{cov_1ey42m904a().f[7]++;cov_1ey42m904a().s[25]++;if(!data){cov_1ey42m904a().b[5][0]++;cov_1ey42m904a().s[26]++;res.status(404).send({message:"Not Found"});}else{cov_1ey42m904a().b[5][1]++;}cov_1ey42m904a().s[27]++;res.send(data);}).catch(err=>{cov_1ey42m904a().f[8]++;cov_1ey42m904a().s[28]++;res.status(500).send({message:"Error retrieving user with id="+id});});};// Update a User by the id in the request
cov_1ey42m904a().s[29]++;exports.update=(req,res)=>{cov_1ey42m904a().f[9]++;const id=(cov_1ey42m904a().s[30]++,req.params.id);cov_1ey42m904a().s[31]++;console.log(id);cov_1ey42m904a().s[32]++;User.update(req.body,{where:{id:id}}).then(num=>{cov_1ey42m904a().f[10]++;cov_1ey42m904a().s[33]++;if(num==1){cov_1ey42m904a().b[6][0]++;cov_1ey42m904a().s[34]++;res.send({message:"User was updated successfully."});}else{cov_1ey42m904a().b[6][1]++;cov_1ey42m904a().s[35]++;res.send({message:`Cannot update User with id=${id}. Maybe User was not found or req.body is empty!`});}}).catch(err=>{cov_1ey42m904a().f[11]++;cov_1ey42m904a().s[36]++;res.status(500).send({message:"Error updating User with id="+id});});};// Delete a User with the specified id in the request
cov_1ey42m904a().s[37]++;exports.delete=(req,res)=>{cov_1ey42m904a().f[12]++;cov_1ey42m904a().s[38]++;console.log(req);const id=(cov_1ey42m904a().s[39]++,req.params.id);cov_1ey42m904a().s[40]++;User.destroy({where:{id:id}}).then(num=>{cov_1ey42m904a().f[13]++;cov_1ey42m904a().s[41]++;if(num==1){cov_1ey42m904a().b[7][0]++;cov_1ey42m904a().s[42]++;res.send({message:"User was deleted successfully!"});}else{cov_1ey42m904a().b[7][1]++;cov_1ey42m904a().s[43]++;res.send({message:`Cannot delete User with id=${id}. Maybe User was not found!`});}}).catch(err=>{cov_1ey42m904a().f[14]++;cov_1ey42m904a().s[44]++;res.status(500).send({message:"Could not delete User with id="+id});});};// Delete all Tutorials from the database.
cov_1ey42m904a().s[45]++;exports.deleteAll=(req,res)=>{cov_1ey42m904a().f[15]++;cov_1ey42m904a().s[46]++;User.destroy({where:{},truncate:false}).then(nums=>{cov_1ey42m904a().f[16]++;cov_1ey42m904a().s[47]++;res.send({message:`${nums} Tutorials were deleted successfully!`});}).catch(err=>{cov_1ey42m904a().f[17]++;cov_1ey42m904a().s[48]++;res.status(500).send({message:(cov_1ey42m904a().b[8][0]++,err.message)||(cov_1ey42m904a().b[8][1]++,"Some error occurred while removing all tutorials.")});});};// Log in a user
cov_1ey42m904a().s[49]++;exports.login=(req,res)=>{cov_1ey42m904a().f[18]++;cov_1ey42m904a().s[50]++;console.log(req.body);cov_1ey42m904a().s[51]++;if((cov_1ey42m904a().b[10][0]++,!req.body.email)||(cov_1ey42m904a().b[10][1]++,!req.body.password)){cov_1ey42m904a().b[9][0]++;cov_1ey42m904a().s[52]++;res.status(400).send({message:"Login credentials incomplete"});cov_1ey42m904a().s[53]++;return;}else{cov_1ey42m904a().b[9][1]++;}const email=(cov_1ey42m904a().s[54]++,req.body.email);const password=(cov_1ey42m904a().s[55]++,req.body.password.toString());cov_1ey42m904a().s[56]++;User.findOne({where:{email:email,password:password}}).then(data=>{cov_1ey42m904a().f[19]++;cov_1ey42m904a().s[57]++;res.send(data);//envio el perfil del usuario...
}).catch(err=>{cov_1ey42m904a().f[20]++;cov_1ey42m904a().s[58]++;res.status(500).send({message:"Error logging user"});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiZGIiLCJyZXF1aXJlIiwiVXNlciIsInVzZXJzIiwiT3AiLCJTZXF1ZWxpemUiLCJleHBvcnRzIiwiY3JlYXRlIiwicmVxIiwicmVzIiwiYm9keSIsIm5hbWUiLCJzdXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImdlbmRlciIsIndlaWdodCIsImhlaWdodCIsImJpcnRoZGF5Iiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJhRGF0ZSIsIkRhdGUiLCJlcnIiLCJ1c2VyIiwidGhlbiIsImRhdGEiLCJjYXRjaCIsImZpbmRBbGwiLCJxdWVyeSIsImNvbmRpdGlvbiIsImlMaWtlIiwid2hlcmUiLCJmaW5kT25lIiwiaWQiLCJwYXJhbXMiLCJjb25zb2xlIiwibG9nIiwiZmluZEJ5UGsiLCJ1cGRhdGUiLCJudW0iLCJkZWxldGUiLCJkZXN0cm95IiwiZGVsZXRlQWxsIiwidHJ1bmNhdGUiLCJudW1zIiwibG9naW4iLCJ0b1N0cmluZyJdLCJtYXBwaW5ncyI6IjRpVUFlWTsyRkFmWixLQUFNQSxDQUFBQSxFQUFFLDBCQUFHQyxPQUFPLENBQUMsV0FBRCxDQUFWLENBQVIsQ0FDQSxLQUFNQyxDQUFBQSxJQUFJLDBCQUFHRixFQUFFLENBQUNHLEtBQU4sQ0FBVixDQUNBLEtBQU1DLENBQUFBLEVBQUUsMEJBQUdKLEVBQUUsQ0FBQ0ssU0FBSCxDQUFhRCxFQUFoQixDQUFSLENBRUE7d0JBQ0FFLE9BQU8sQ0FBQ0MsTUFBUixDQUFpQixDQUFDQyxHQUFELENBQU1DLEdBQU4sR0FBYyxpREFDNUI7QUFDRCxHQUFJLDZCQUFDRCxHQUFHLENBQUNFLElBQUosQ0FBU0MsSUFBViwrQkFBa0IsQ0FBQ0gsR0FBRyxDQUFDRSxJQUFKLENBQVNFLE9BQTVCLCtCQUF1QyxDQUFDSixHQUFHLENBQUNFLElBQUosQ0FBU0csS0FBakQsK0JBQTBELENBQUNMLEdBQUcsQ0FBQ0UsSUFBSixDQUFTSSxRQUFwRSwrQkFBZ0YsQ0FBQ04sR0FBRyxDQUFDRSxJQUFKLENBQVNLLE1BQTFGLCtCQUFvRyxDQUFDUCxHQUFHLENBQUNFLElBQUosQ0FBU00sTUFBOUcsK0JBQXdILENBQUNSLEdBQUcsQ0FBQ0UsSUFBSixDQUFTTyxNQUFsSSwrQkFBNEksQ0FBQ1QsR0FBRyxDQUFDRSxJQUFKLENBQVNRLFFBQXRKLENBQUosQ0FBb0ssb0RBRWxLVCxHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUNuQkMsT0FBTyxDQUFFLDJCQURVLENBQXJCLEVBRmtLLHdCQUtsSyxPQUNELENBTkQsaUNBT0U7QUFUMkIsd0JBVTdCLEdBQUcsQ0FDRCxHQUFJQyxDQUFBQSxLQUFLLDBCQUFHLEdBQUlDLENBQUFBLElBQUosQ0FBU2YsR0FBRyxDQUFDRSxJQUFKLENBQVNRLFFBQWxCLENBQUgsQ0FBVCxDQUNELENBQ0QsTUFBT00sR0FBUCxDQUFXLHlCQUNUZixHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUNuQkMsT0FBTyxDQUFFLGlCQURVLENBQXJCLEVBRFMseUJBSVQsT0FDRCxFQUVEO0FBQ0EsS0FBTUksQ0FBQUEsSUFBSSwyQkFBRyxDQUNYZCxJQUFJLENBQUVILEdBQUcsQ0FBQ0UsSUFBSixDQUFTQyxJQURKLENBRVhDLE9BQU8sQ0FBRUosR0FBRyxDQUFDRSxJQUFKLENBQVNFLE9BRlAsQ0FHWEMsS0FBSyxDQUFFTCxHQUFHLENBQUNFLElBQUosQ0FBU0csS0FITCxDQUlYQyxRQUFRLENBQUVOLEdBQUcsQ0FBQ0UsSUFBSixDQUFTSSxRQUpSLENBS1hJLFFBQVEsQ0FBRSxHQUFJSyxDQUFBQSxJQUFKLENBQVNmLEdBQUcsQ0FBQ0UsSUFBSixDQUFTUSxRQUFsQixDQUxDLENBTVhILE1BQU0sQ0FBRVAsR0FBRyxDQUFDRSxJQUFKLENBQVNLLE1BTk4sQ0FPWEMsTUFBTSxDQUFFUixHQUFHLENBQUNFLElBQUosQ0FBU00sTUFQTixDQVFYQyxNQUFNLENBQUVULEdBQUcsQ0FBQ0UsSUFBSixDQUFTTyxNQVJOLENBQUgsQ0FBVixDQVdBO0FBaEM2Qix5QkFpQzdCZixJQUFJLENBQUNLLE1BQUwsQ0FBWWtCLElBQVosRUFDR0MsSUFESCxDQUNRQyxJQUFJLEVBQUksa0RBQ1psQixHQUFHLENBQUNXLElBQUosQ0FBU08sSUFBVCxFQUNELENBSEgsRUFJR0MsS0FKSCxDQUlTSixHQUFHLEVBQUksa0RBQ1pmLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ25CQyxPQUFPLENBQ0wsNEJBQUFHLEdBQUcsQ0FBQ0gsT0FBSiwrQkFBZSxnQ0FBZixDQUZpQixDQUFyQixFQUlELENBVEgsRUFVRCxDQTNDRCxDQTZDQTt5QkFDQWYsT0FBTyxDQUFDdUIsT0FBUixDQUFrQixDQUFDckIsR0FBRCxDQUFNQyxHQUFOLEdBQWMseUJBQzVCLEtBQU1FLENBQUFBLElBQUksMkJBQUdILEdBQUcsQ0FBQ3NCLEtBQUosQ0FBVW5CLElBQWIsQ0FBVixDQUNBLEdBQUlvQixDQUFBQSxTQUFTLDJCQUFHcEIsSUFBSSw2QkFBRyxDQUFFQSxJQUFJLENBQUUsQ0FBRSxDQUFDUCxFQUFFLENBQUM0QixLQUFKLEVBQWEsSUFBR3JCLElBQUssR0FBdkIsQ0FBUixDQUFILDhCQUEyQyxJQUEzQyxDQUFQLENBQWIsQ0FGNEIseUJBSTVCVCxJQUFJLENBQUMyQixPQUFMLENBQWEsQ0FBRUksS0FBSyxDQUFFRixTQUFULENBQWIsRUFDR0wsSUFESCxDQUNRQyxJQUFJLEVBQUksa0RBQ1psQixHQUFHLENBQUNXLElBQUosQ0FBU08sSUFBVCxFQUNELENBSEgsRUFJR0MsS0FKSCxDQUlTSixHQUFHLEVBQUksa0RBQ1pmLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ25CQyxPQUFPLENBQ0wsNEJBQUFHLEdBQUcsQ0FBQ0gsT0FBSiwrQkFBZSwrQkFBZixDQUZpQixDQUFyQixFQUlELENBVEgsRUFVSCxDQWRELENBZ0JBO3lCQUNBZixPQUFPLENBQUM0QixPQUFSLENBQWtCLENBQUMxQixHQUFELENBQU1DLEdBQU4sR0FBYyx5QkFDNUIsS0FBTTBCLENBQUFBLEVBQUUsMkJBQUczQixHQUFHLENBQUM0QixNQUFKLENBQVdELEVBQWQsQ0FBUixDQUQ0Qix5QkFFNUJFLE9BQU8sQ0FBQ0MsR0FBUixDQUFZOUIsR0FBWixFQUY0Qix5QkFJNUJOLElBQUksQ0FBQ3FDLFFBQUwsQ0FBY0osRUFBZCxFQUNHVCxJQURILENBQ1FDLElBQUksRUFBSSxrREFDWixHQUFHLENBQUNBLElBQUosQ0FBUyxxREFDUGxCLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQ0UsQ0FBQ0MsT0FBTyxDQUFFLFdBQVYsQ0FERixFQUdELENBSkQsaUNBRFkseUJBTVpaLEdBQUcsQ0FBQ1csSUFBSixDQUFTTyxJQUFULEVBQ0QsQ0FSSCxFQVNHQyxLQVRILENBU1NKLEdBQUcsRUFBSSxrREFDWmYsR0FBRyxDQUFDVSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDbkJDLE9BQU8sQ0FBRSxpQ0FBbUNjLEVBRHpCLENBQXJCLEVBR0QsQ0FiSCxFQWNILENBbEJELENBb0JBO3lCQUNBN0IsT0FBTyxDQUFDa0MsTUFBUixDQUFpQixDQUFDaEMsR0FBRCxDQUFNQyxHQUFOLEdBQWMseUJBQzNCLEtBQU0wQixDQUFBQSxFQUFFLDJCQUFHM0IsR0FBRyxDQUFDNEIsTUFBSixDQUFXRCxFQUFkLENBQVIsQ0FEMkIseUJBRzNCRSxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsRUFBWixFQUgyQix5QkFLM0JqQyxJQUFJLENBQUNzQyxNQUFMLENBQVloQyxHQUFHLENBQUNFLElBQWhCLENBQXNCLENBQ3BCdUIsS0FBSyxDQUFFLENBQUVFLEVBQUUsQ0FBRUEsRUFBTixDQURhLENBQXRCLEVBR0dULElBSEgsQ0FHUWUsR0FBRyxFQUFJLG1EQUNYLEdBQUlBLEdBQUcsRUFBSSxDQUFYLENBQWMscURBQ1poQyxHQUFHLENBQUNXLElBQUosQ0FBUyxDQUNQQyxPQUFPLENBQUUsZ0NBREYsQ0FBVCxFQUdELENBSkQsSUFJTyxxREFDTFosR0FBRyxDQUFDVyxJQUFKLENBQVMsQ0FDUEMsT0FBTyxDQUFHLDhCQUE2QmMsRUFBRyxrREFEbkMsQ0FBVCxFQUdELENBQ0YsQ0FiSCxFQWNHUCxLQWRILENBY1NKLEdBQUcsRUFBSSxtREFDWmYsR0FBRyxDQUFDVSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDbkJDLE9BQU8sQ0FBRSwrQkFBaUNjLEVBRHZCLENBQXJCLEVBR0QsQ0FsQkgsRUFtQkgsQ0F4QkQsQ0EwQkE7eUJBQ0E3QixPQUFPLENBQUNvQyxNQUFSLENBQWlCLENBQUNsQyxHQUFELENBQU1DLEdBQU4sR0FBYyxtREFDN0I0QixPQUFPLENBQUNDLEdBQVIsQ0FBWTlCLEdBQVosRUFDRSxLQUFNMkIsQ0FBQUEsRUFBRSwyQkFBRzNCLEdBQUcsQ0FBQzRCLE1BQUosQ0FBV0QsRUFBZCxDQUFSLENBRjJCLHlCQUkzQmpDLElBQUksQ0FBQ3lDLE9BQUwsQ0FBYSxDQUNYVixLQUFLLENBQUUsQ0FBRUUsRUFBRSxDQUFFQSxFQUFOLENBREksQ0FBYixFQUdHVCxJQUhILENBR1FlLEdBQUcsRUFBSSxtREFDWCxHQUFJQSxHQUFHLEVBQUksQ0FBWCxDQUFjLHFEQUNaaEMsR0FBRyxDQUFDVyxJQUFKLENBQVMsQ0FDUEMsT0FBTyxDQUFFLGdDQURGLENBQVQsRUFHRCxDQUpELElBSU8scURBQ0xaLEdBQUcsQ0FBQ1csSUFBSixDQUFTLENBQ1BDLE9BQU8sQ0FBRyw4QkFBNkJjLEVBQUcsNkJBRG5DLENBQVQsRUFHRCxDQUNGLENBYkgsRUFjR1AsS0FkSCxDQWNTSixHQUFHLEVBQUksbURBQ1pmLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ25CQyxPQUFPLENBQUUsaUNBQW1DYyxFQUR6QixDQUFyQixFQUdELENBbEJILEVBbUJILENBdkJELENBeUJBO3lCQUNBN0IsT0FBTyxDQUFDc0MsU0FBUixDQUFvQixDQUFDcEMsR0FBRCxDQUFNQyxHQUFOLEdBQWMsbURBQzlCUCxJQUFJLENBQUN5QyxPQUFMLENBQWEsQ0FDVFYsS0FBSyxDQUFFLEVBREUsQ0FFVFksUUFBUSxDQUFFLEtBRkQsQ0FBYixFQUlLbkIsSUFKTCxDQUlVb0IsSUFBSSxFQUFJLG1EQUNackMsR0FBRyxDQUFDVyxJQUFKLENBQVMsQ0FBRUMsT0FBTyxDQUFHLEdBQUV5QixJQUFLLHVDQUFuQixDQUFULEVBQ0QsQ0FOTCxFQU9LbEIsS0FQTCxDQU9XSixHQUFHLEVBQUksbURBQ1pmLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ25CQyxPQUFPLENBQ0wsNEJBQUFHLEdBQUcsQ0FBQ0gsT0FBSiwrQkFBZSxtREFBZixDQUZpQixDQUFyQixFQUlELENBWkwsRUFhSCxDQWRELENBZ0JBO3lCQUNBZixPQUFPLENBQUN5QyxLQUFSLENBQWdCLENBQUN2QyxHQUFELENBQU1DLEdBQU4sR0FBYyxtREFDNUI0QixPQUFPLENBQUNDLEdBQVIsQ0FBWTlCLEdBQUcsQ0FBQ0UsSUFBaEIsRUFENEIseUJBRTVCLEdBQUksOEJBQUNGLEdBQUcsQ0FBQ0UsSUFBSixDQUFTRyxLQUFWLGdDQUFtQixDQUFDTCxHQUFHLENBQUNFLElBQUosQ0FBU0ksUUFBN0IsQ0FBSixDQUE0QyxxREFDMUNMLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ25CQyxPQUFPLENBQUUsOEJBRFUsQ0FBckIsRUFEMEMseUJBSTFDLE9BQ0QsQ0FMRCxpQ0FNQSxLQUFNUixDQUFBQSxLQUFLLDJCQUFHTCxHQUFHLENBQUNFLElBQUosQ0FBU0csS0FBWixDQUFYLENBQ0EsS0FBTUMsQ0FBQUEsUUFBUSwyQkFBSU4sR0FBRyxDQUFDRSxJQUFKLENBQVNJLFFBQVYsQ0FBb0JrQyxRQUFwQixFQUFILENBQWQsQ0FUNEIseUJBVzVCOUMsSUFBSSxDQUFDZ0MsT0FBTCxDQUFhLENBQUVELEtBQUssQ0FBRSxDQUFFcEIsS0FBSyxDQUFFQSxLQUFULENBQWdCQyxRQUFRLENBQUVBLFFBQTFCLENBQVQsQ0FBYixFQUNHWSxJQURILENBQ1FDLElBQUksRUFBSSxtREFDWmxCLEdBQUcsQ0FBQ1csSUFBSixDQUFTTyxJQUFULEVBQWdCO0FBQ2pCLENBSEgsRUFJR0MsS0FKSCxDQUlTSixHQUFHLEVBQUksbURBQ1pmLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ25CQyxPQUFPLENBQUUsb0JBRFUsQ0FBckIsRUFHRCxDQVJILEVBU0QsQ0FwQkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYiA9IHJlcXVpcmUoXCIuLi9tb2RlbHNcIik7XG5jb25zdCBVc2VyID0gZGIudXNlcnM7XG5jb25zdCBPcCA9IGRiLlNlcXVlbGl6ZS5PcDtcblxuLy8gQ3JlYXRlIGFuZCBTYXZlIGEgbmV3IFVzZXJcbmV4cG9ydHMuY3JlYXRlID0gKHJlcSwgcmVzKSA9PiB7XG4gICAvLyBWYWxpZGF0ZSByZXF1ZXN0XG4gIGlmICghcmVxLmJvZHkubmFtZSB8fCAhcmVxLmJvZHkuc3VybmFtZSB8fCAhcmVxLmJvZHkuZW1haWwgfHwgIXJlcS5ib2R5LnBhc3N3b3JkIHx8ICFyZXEuYm9keS5nZW5kZXIgfHwgIXJlcS5ib2R5LndlaWdodCB8fCAhcmVxLmJvZHkuaGVpZ2h0IHx8ICFyZXEuYm9keS5iaXJ0aGRheSkge1xuXG4gICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgbWVzc2FnZTogXCJDb250ZW50IGNhbiBub3QgYmUgZW1wdHkhXCJcbiAgICB9KTtcbiAgICByZXR1cm5cbiAgfVxuICAgIC8vQ2hlY2sgZGF0ZSBmb3JtYXRcbiAgdHJ5e1xuICAgIGxldCBhRGF0ZSA9IG5ldyBEYXRlKHJlcS5ib2R5LmJpcnRoZGF5KTtcbiAgfVxuICBjYXRjaCAoZXJyKXtcbiAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICBtZXNzYWdlOiBcIkJhZCBEYXRlIEZvcm1hdFwiXG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIFVzZXJcbiAgY29uc3QgdXNlciA9IHtcbiAgICBuYW1lOiByZXEuYm9keS5uYW1lLFxuICAgIHN1cm5hbWU6IHJlcS5ib2R5LnN1cm5hbWUsXG4gICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxuICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZCxcbiAgICBiaXJ0aGRheTogbmV3IERhdGUocmVxLmJvZHkuYmlydGhkYXkpLFxuICAgIGdlbmRlcjogcmVxLmJvZHkuZ2VuZGVyLFxuICAgIHdlaWdodDogcmVxLmJvZHkud2VpZ2h0LFxuICAgIGhlaWdodDogcmVxLmJvZHkuaGVpZ2h0XG4gIH07XG5cbiAgLy8gU2F2ZSBVc2VyIGluIHRoZSBkYXRhYmFzZVxuICBVc2VyLmNyZWF0ZSh1c2VyKVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgcmVzLnNlbmQoZGF0YSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgbWVzc2FnZTpcbiAgICAgICAgICBlcnIubWVzc2FnZSB8fCBcIkVycm9yIHdoaWxlIGNyZWF0aW5nIG5ldyBVc2VyLlwiXG4gICAgICB9KTtcbiAgICB9KTtcbn07XG5cbi8vIFJldHJpZXZlIGFsbCBVc2VycyBmcm9tIHRoZSBkYXRhYmFzZS5cbmV4cG9ydHMuZmluZEFsbCA9IChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSByZXEucXVlcnkubmFtZTtcbiAgICB2YXIgY29uZGl0aW9uID0gbmFtZSA/IHsgbmFtZTogeyBbT3AuaUxpa2VdOiBgJSR7bmFtZX0lYCB9IH0gOiBudWxsO1xuICBcbiAgICBVc2VyLmZpbmRBbGwoeyB3aGVyZTogY29uZGl0aW9uIH0pXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgcmVzLnNlbmQoZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgZXJyLm1lc3NhZ2UgfHwgXCJFcnJvciB3aGlsZSByZXRyaWV2aW5nIHVzZXJzLlwiXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG59O1xuXG4vLyBGaW5kIGEgc2luZ2xlIG5hbWUgd2l0aCBhbiBpZFxuZXhwb3J0cy5maW5kT25lID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkO1xuICAgIGNvbnNvbGUubG9nKHJlcSk7XG5cbiAgICBVc2VyLmZpbmRCeVBrKGlkKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGlmKCFkYXRhKXtcbiAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZChcbiAgICAgICAgICAgIHttZXNzYWdlOiBcIk5vdCBGb3VuZFwifVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICByZXMuc2VuZChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgcmV0cmlldmluZyB1c2VyIHdpdGggaWQ9XCIgKyBpZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xufTtcblxuLy8gVXBkYXRlIGEgVXNlciBieSB0aGUgaWQgaW4gdGhlIHJlcXVlc3RcbmV4cG9ydHMudXBkYXRlID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkO1xuXG4gICAgY29uc29sZS5sb2coaWQpO1xuXG4gICAgVXNlci51cGRhdGUocmVxLmJvZHksIHtcbiAgICAgIHdoZXJlOiB7IGlkOiBpZCB9XG4gICAgfSlcbiAgICAgIC50aGVuKG51bSA9PiB7XG4gICAgICAgIGlmIChudW0gPT0gMSkge1xuICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciB3YXMgdXBkYXRlZCBzdWNjZXNzZnVsbHkuXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQ2Fubm90IHVwZGF0ZSBVc2VyIHdpdGggaWQ9JHtpZH0uIE1heWJlIFVzZXIgd2FzIG5vdCBmb3VuZCBvciByZXEuYm9keSBpcyBlbXB0eSFgXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgdXBkYXRpbmcgVXNlciB3aXRoIGlkPVwiICsgaWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbn07XG5cbi8vIERlbGV0ZSBhIFVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGlkIGluIHRoZSByZXF1ZXN0XG5leHBvcnRzLmRlbGV0ZSA9IChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZyhyZXEpO1xuICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZDtcblxuICAgIFVzZXIuZGVzdHJveSh7XG4gICAgICB3aGVyZTogeyBpZDogaWQgfVxuICAgIH0pXG4gICAgICAudGhlbihudW0gPT4ge1xuICAgICAgICBpZiAobnVtID09IDEpIHtcbiAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgd2FzIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgbWVzc2FnZTogYENhbm5vdCBkZWxldGUgVXNlciB3aXRoIGlkPSR7aWR9LiBNYXliZSBVc2VyIHdhcyBub3QgZm91bmQhYFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkNvdWxkIG5vdCBkZWxldGUgVXNlciB3aXRoIGlkPVwiICsgaWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbn07XG5cbi8vIERlbGV0ZSBhbGwgVHV0b3JpYWxzIGZyb20gdGhlIGRhdGFiYXNlLlxuZXhwb3J0cy5kZWxldGVBbGwgPSAocmVxLCByZXMpID0+IHtcbiAgICBVc2VyLmRlc3Ryb3koe1xuICAgICAgICB3aGVyZToge30sXG4gICAgICAgIHRydW5jYXRlOiBmYWxzZVxuICAgICAgfSlcbiAgICAgICAgLnRoZW4obnVtcyA9PiB7XG4gICAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiBgJHtudW1zfSBUdXRvcmlhbHMgd2VyZSBkZWxldGVkIHN1Y2Nlc3NmdWxseSFgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgICBlcnIubWVzc2FnZSB8fCBcIlNvbWUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVtb3ZpbmcgYWxsIHR1dG9yaWFscy5cIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbn07XG5cbi8vIExvZyBpbiBhIHVzZXJcbmV4cG9ydHMubG9naW4gPSAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xuICBpZiAoIXJlcS5ib2R5LmVtYWlsIHx8ICFyZXEuYm9keS5wYXNzd29yZCApIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICBtZXNzYWdlOiBcIkxvZ2luIGNyZWRlbnRpYWxzIGluY29tcGxldGVcIlxuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBlbWFpbCA9IHJlcS5ib2R5LmVtYWlsO1xuICBjb25zdCBwYXNzd29yZCA9IChyZXEuYm9keS5wYXNzd29yZCkudG9TdHJpbmcoKTtcblxuICBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogZW1haWwsIHBhc3N3b3JkOiBwYXNzd29yZCB9IH0pXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICByZXMuc2VuZChkYXRhKTsgLy9lbnZpbyBlbCBwZXJmaWwgZGVsIHVzdWFyaW8uLi5cbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xuICAgICAgICBtZXNzYWdlOiBcIkVycm9yIGxvZ2dpbmcgdXNlclwiXG4gICAgICB9KTtcbiAgICB9KTtcbn07XG4iXX0=